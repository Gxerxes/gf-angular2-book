# 引言

通过前面两个章节的学习，相信你已经对Angular2的核心概念有一定的理解和认识。在掌握了基本概念后，接下来将学习如何把Angular2相关知识整合起来，构建一个完整的web应用。
在本章节中，我们将使用Angular2实现一个简单的问卷调查系统。例子中会使用到前面介绍的大部分知识，如组件、指令、服务、路由等等，并清楚的掌握它们是如何协同工作，实现整个问卷调查系统的正常运行的。

# 1. 产品介绍

## 1.1 案例背景

在大数据高速发展的今天，有效的数据采集是所有大数据产品的基础，也是最关键的一环。数据采集的方式多种多样，例如，电商网站可以通过日志系统记录用户的访问历史，进而通过大数据平台分析出用户近期对哪一类商品感兴趣，并有针对性的做产品推广。再比如，我们经常使用的地图类App，可以通过收集正在使用用户的地理位置信息分析出特定区域的交通拥堵情况，进而给出合理的出行线路的建议。而问卷调查则是一种更为直接，更有针对性的数据采集手段。

问卷调查是以书面提出问题的方式搜集资料的一种研究方法。 研究者将所要研究的问题编制成问题表格，以邮寄方式、当面作答或者追踪访问方式填答，从而了解被试对某一现象或问题的看法和意见，所以又称问题表格法（来自百度百科）。而随着互联网的发展和普及，网络问卷调查系统因其使用方便、成本低廉等优势逐步成为一种广泛流行的问卷调查方式。
目前国内已经涌现出了问卷网、问卷星、腾讯问卷以及调查派等知名的在线问卷调查网站。

这里实现的问卷调查系统，参考了目前较为流行的几种问卷调查网站的实现方式，并对某些功能做了简化处理。这样一方面保证了实例的复杂度，可以有效的涵盖Angular2的各项核心概念；另一方面也确保了实例的简洁性和可读性。

## 1.2 主要特性

在规范的软件开发流程中，我们首先需要进行需求分析。需求分析阶段，需要明确系统需要解决的什么问题，包括系统提供的功能和怎样的用户操作界面。这一步通常是由专门的产品经理去完成。这里我们将本案例作为本书的实例部分，跟真实的软件开发还是有所区别，因此需求分析阶段就由我们自己来完成。我们简单的分解一下问卷调查系统应有的产品特性和功能：

1. **首页和帮助页**
首页提供系统的各项功能的入口和简单的系统介绍。帮助页提供系统各个功能模块的介绍并指导用户正确的使用此问卷调查系统。

2. **用户管理功能**
用户通过注册成为调查问卷系统的使用者，获取创建和编辑问卷的权限。用户还可以随时登录到系统查看自己创建的问卷的基本信息以及统计情况。

3. **问卷管理功能**
用户可以创建新的问卷，也可以编辑已有问卷。一个完整的问卷由开始和结束提示语，以及若干个问题组成。为了方便用户的使用，大多数的调查问卷系统都会预设多种问题控件供用户选择。我们的例子简化了问题控件的数量，选取了四类更为常用的，且具备代表性的问题控件类型，分别为文本题、单选题、多选题和分值题。同时我们还提供了问卷大纲，用户在创建和编辑问卷的过程中可以随时查看问卷已有的问题列表。

4. **问卷查看功能**
用户可以查看自己创建的问卷列表，以及每个问卷的名称、创建时间，发布时间以及当前状态等基本信息，还可以查看问卷的统计信息。这里需要特别说明的是，为了简化例子的复杂度，我们极大的精简了问卷统计的功能。除此之外用户还可以执行预览、发布以及回收问卷的功能。

通过本节的介绍，读者应该对我们的实例有了更进一步的认识，接下来我们将介绍如果设计我们的产品，将这些特性和功能整合到一起。


## 1.3 产品设计

在上一个小节中，我们确定了问卷调查系统的主要功能特性，在这个小节中，我们会对其进行更详细的产品设计，将问卷调查系统的的主要功能特性和使用方式以友好的交互方式展现给用户。

### 1.3.1 首页和帮助页
几乎所有的互联网产品都有会有一个首页，它通常是用户访问该系统所看到的第一个页面。首页对于一个互联网产品非常重要，设计良好、便于使用、界面美观的首页可以吸引访问者继续访问或使用系统的其他页面和功能，同时也有利于用户对产品的自发性推广，帮助产品获得更多的用户。

**首页**

![首页截图][1]

从上面的截图上可以看到，我们的问卷调查系统首页包含了几个主要的部分：

 1. **导航菜单** 这是系统所有页面的公共组成部分之一，里面包含了系统主要功能的入口，方便用户在系统的每个功能之间快速跳转。

    > - 首页：快速回到系统首页
    > - 注册：用于注册系统账号，注册用户才能使用系统的问卷管理功能以及发布问卷
    > - 登录：快速登录系统
    > - 创建问卷：跳转到问卷创建页面，快速创建一个新的问卷
    > - 我的问卷：跳转到当前登录用户的问卷管理页，可以查看自己创建的问卷列表、详细信息和统计信息，也可以在这里重新编辑已有的问卷
    > - 使用帮助：系统帮助页，为用户提供系统使用指引等

 2. **轮播图** 系统首页的轮播图是现代web产品首页常用的设计，通过几张自动轮播的图片为访问用户介绍产品的主要功能和优势，既美观又简洁。
 3. **版权说明** 页面底部的版权信息也是系统每个页面的公共部分之一，我们在说明系统的开发者、联系方式、版权申明等。

**帮助页**

![帮助页截图][2]

 从首页导航栏中的***使用帮助***按钮可以快速跳转到帮助页。帮助页面并不是我们实战案例的讲述重点，因此这个页面的设计相对简单，只是简单的以图文结合的方式说明使用系统的常见问题，和系统最重要的问卷创建和管理功能。


  [1]: https://raw.githubusercontent.com/gf-rd/gf-angular2-book/master/_images/chapters3/chart_3.3.1.png
  [2]: https://raw.githubusercontent.com/gf-rd/gf-angular2-book/master/_images/chapters3/chart_3.3.2.png

===

### 1.3.2 用户管理

任何一个完善的系统，用户管理都是很基础的一部分，这个问卷系统也不例外。为了便于管理问卷，以及查看问卷结果，注册就显得尤为重要。最基础的用户管理，至少应该包含注册和登录。

1. **用户注册** 填写用户名和密码，即可完成注册，这里新增了一个显示密码的选项，方便确认密码是否输入错误。
**用户注册**
![用户注册截图 3.2.1][3.2.1]

2. **用户登录** 登录和注册有类似的地方，同样是填写用户名和密码即可。
**用户登录**
![用户登录截图 3.2.2][3.2.2]

[3.2.1]: https://raw.githubusercontent.com/gf-rd/gf-angular2-book/master/_images/chapters3/3.2.1.png
[3.2.2]: https://raw.githubusercontent.com/gf-rd/gf-angular2-book/master/_images/chapters3/3.2.2.png

===

### 1.3.3 创建/编辑问卷

#### 问卷组成

创建和编辑问卷是整个产品的核心功能，也是产品设计的重点。一般而言，一个基本的问卷由问卷介绍和问题列表两大部分组成。

*********这里是问卷的截图*********

在我们的产品设计中，问卷介绍主要由开始语和结束语组成，其中开始语用来阐述问卷的用途及填写的注意事项等，让问卷填写对象对问卷内容有一个基本的了解；结束语主要用来对问卷填写对象表达谢意等。

问题列表则是整个问卷最主要的组成部分，一个问题列表又由多个问题控件构成，其中每个问题控件都是基于不同的问题类型独立创建的。

#### 问题控件

问题控件是创建问题的基础，控件类型决定了问题的类型。为了简化例子，我们的产品主要实现文本题、单选题、多选题和分值题四类问题控件。

*********这里是四类问题控件的截图*********

除了问题类型之外，一个问题控件的基本属性还包括问题描述、答案选项和问题答案三个部分，其中答案选项是非必须属性，且随着问题控件类型的不同，选项也有所区别。例如，文本题没有答案选项属性，单选题和多选题的选项是列表的形式，而分值题的选项则是input控件的形式。

#### 问卷操作

本节介绍的问卷操作主要是指创建问卷和编辑问卷两种类型。创建一个问卷的基本步骤包括：

1. 填写开始语和结束语
2. 选择问题控件，并添加一个空白问题
3. 增加问题描述，问题选项（如果有的话）
4. 重复操作2和3，直至添加完问卷所需的所有问题
5. 提交并保存问卷

在问卷创建的过程中，问卷始终处于创建中（Create）状态，一旦问卷创建成功，问卷就进入可编辑状态（Edit）,用户可以编辑一个处于可编辑状态中的问卷，编辑问卷的步骤和创建问卷的步骤大体相同，唯一不同之处在于编辑问卷时，可以修改已经保存过的问题。

### 1.3.4 我的问卷

#### 问卷列表

用户可以通过我的问卷查看自己创建的问卷列表，其中每个列表项包含问卷名、问卷状态和问卷创建时间等内容。

*********这里是问卷列表的截图*********

选中单个列表项可以查看问卷详情和管理问卷，接下来我们将分别介绍。

#### 问卷详情

列表项中只包含了问卷名、问卷状态和问卷创建时间等三个问卷属性，除此之外，我们还可以在详情展示部分查看问卷ID、问卷地址以及统计信息等其它属性。

*********这里是问卷详情的截图*********

#### 问卷管理

这里的问卷管理是指一系列问卷操作相关的按钮组，主要包括查看问卷、编辑问卷、发布问卷、回收问卷以及查看统计信息等操作。

*********这里是问卷管理的截图*********

至此，相信大家对我们的产品设计有个更深入的了解，和大多数实际使用中的在线问卷调查系统相比，我们的例子做了极大的简化，这里主要列举几个非常重要但被我们简化的功能：

- 实际使用中的组件类别是多种多样的，我们的例子只选择实现了最具代表性的四类
- 问卷的分页功能被忽略
- 问卷的回收统计功能被忽略，产品展示的统计信息均是伪造的
- 服务后台被简化成一个简单的json服务器，无法满足实际生产环境中的需求

## 1.4 总结

本章节主要是对案例实现的产品做了一个系统的介绍。首先通过案例背景了解了我们选择问卷调查系统的原因；然后介绍了下产品要实现的功能和特性，让读者有了更具体的了解；最后通过详细的产品设计，进一步阐明了系统实现这些功能和特性的细节，以及功能简化的临界点。

了解了案例要做什么之后，接下来就是怎么做了。首先在项目实施章节，读者可以学习到如何从零开始搭建一个angular2的集成开发环境，并了解到我们使用的各项技术；然后在组件开发章节，读者可以学习到如何应用学习到的各项技术逐步实现组件树中的各个组件；最后，为了更好的帮助到读者，我们会拿出更具代表性和复杂度的用户管理和问卷创建模块，做更深入的讲解。



