## 2.5 变化监测机制
在`Angular2`中提供了数据绑定的功能（在模板章节会详细介绍），所谓数据绑定即将数据和页面DOM元素关联起来，当数据发生变化或者更改后，Angular2能够检测到这些变化或者更改，并对其所绑定的DOM元素进行相应的更新，反之亦然。它的数据流向是单项的，通过属性绑定和事件绑定来实现数据的流入和流出，数据从属性绑定流入组件，从事件流出组件，`Angular2`数据的双向绑定就是通过这样来实现的。

### 2.5.1 引起数据变化的来源
试想一下，页面数据在什么样的场景下会发生更改？在现有的应用场景下，开发者们大致认为有如下3类：

- `event`类，即页面操作所引发的用户事件，如click, change, hover等；
- `xmlHTTPRequest/webSocket`类，即从远端服务拉取对应的数据，这是一个异步的过程；
- `timeout`等页面的各类定时任务，如`setTimeout, setInterval, requestAnimationFrame`，都是在某个延时后触发。

以上的共同特征是什么？很明显共同点是它们都是异步的处理，即需要使用异步回调函数，这带给我们的结论就是，任意的一个异步操作，都有可能在数据层面上发生改变，这可能导致应用程序状态已经被改变，因此，如果可以在每一个异步回调函数执行结束后，能够通知`Angular2`内核进行更改检测，那么任何数据的更改就可以被实时地反应出来。

下面举个简单的例子进行说明,可以在组件的模板元数据中添加如下代码片段：

```html
<i [ngClass]="{collect: detail.collection == 0, collected: detail.collection == 1}" (click)="collectTheContact()"></i>
```
该例子是一个通讯录收藏的功能实现，当用户点击收藏按钮后，这将告诉`Angular2`此时的`detail.collection`数据发生改变，通知视图层做出相应的改变等。

正如上面的例子，通过属性绑定实现了数据从父传递给了子，而事件绑定则实现了数据由子到父的传递，这也就是`Angular2`用来实现数据双向绑定的方法。它实现的是单向流的数据传递，也就是说，数据流只能向下流入组件，如果需要进行数据变化，可以发射导致变化的事件到顶部，待数据变化处理完成，然后再往下流入组件。那么问题来了，`Angular2`如何知道数据是否已经处理处理完成，这份新的数据是否有变化，如果数据有变化，那是怎么来通知数据往下流入组件通知组件来改变视图呢？下面给读者介绍变化的通知机制。

### 2.5.2 变动通知机制
> todo...



