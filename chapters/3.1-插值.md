## 引言HTML是模板的主要形式，Angular模板的默认语言就是HTML。几乎所有的HTML语法在模板中都是适用的。但`<script`元素是被禁止的，主要是为了防止Javascript脚本的注入。同时一些HTML元素在模板中并不起什么作用，比如`<html>`，`<body>`，`<base>`。除此之外，Angular2中可以通过组件和指令对模板的HTML词汇进行扩展，这些扩展作为新的元素和属性出现。
##3.1 插值
数据绑定最常见的形式就插值，在Angular中，默认使用的是双大括号作为插值语法。使用插值可以在HTML元素标签和属性值内将变量输出，如
```
<h3>
{{title}}
<img src="{{ImageUrl}}">
</h3>
```
大括号中间的通常是一个组件属性的名字，Angular使用了相应组件属性的值来替换这个名字。在这个例子中，Angular就是对`title`和`ImageUrl`求值并替换后在进行展示的。
更普遍的做法是，大括号里面还可以是一个合法的表达式，Angular首先求值，然后转换成一个字符串，如
```
<!-- "1+1=2" -->
<p>1+1={{1+1}}</p>
```
表达式甚至可以调用宿主组件的函数，如
```
<!-- "1+1的和不是4" -->
<p>1+1的和不是{{1 + 1 + getVal()}}</p
```
Angular对于双大括号里面的表达式都会求值，转化成字符串的结果，然后和附近的字符串组合在一起。最终，将这个结果分配给元素或者指令的属性。
表面上看，插值的作用是讲`{{`和`}}`里面的内容计算转化成字符串后，“替换”`{{...}}`这里的内容，这样的理解在使用上并没有问题，但是实际在Angular中，插值的本质是转化成`属性绑定`的一种特殊语法，`{{`和`}}`里面的内容，在Angular中称为`模板表达式`，接下来先来了解一下模板表达式，然后再继续学习属性绑定。
###3.1.1 模板表达式
一个模板表达式产生一个值。Angular会执行这个表达式然后将值分配给一个绑定目标的属性上。这个目标可能是一个HTML元素，一个组件或者一个指令。
目标表达式会书写在插值语法中，在属性绑定那里我们将再次看到模板表达式的出现，`[属性]="模板表达式"`。
模板表达式写起来就像是Javascript，很多Javascript表达式都是合法的模板表达式，但不是全部。
有或促进副作用的Javascript表达式是被禁止的，包括：
* 赋值表达式（`=`，`+=`，`-=`...）
* new操作符
* 带有`;`或者`'`的连接表达式
* 自增和自减操作（`++`和`--`）
其他与Javascript语法不同的值得注意的包括：
* 不支持位运算符（`|`和`&`）
* 模板表达式的操作符，如`|`和`?.`等，被赋予了新的含义
模板表达式不能引用任何全局命名空间中的成员，如window何document，也不能调用`console.log`或者`Math.max`等方法，仅限于引用表达式上下文的成员。表达式的上下文典型的是绑定目标的值的组件实例。当看到被双大括号包裹的*title*—{{title}}，就会知道`title`是数据绑定组件的一个属性。当看到`[disabled]="ischange"`中的*ischange*，就会知道引用了组件的`ischange`属性。组件本身通常是表达式的上下文，这就是模板表达式通常引用那个组件的原因。表达式上下文除了组件外还可以是一个对象，一个模板引用变量可以是这样的一个可供替代的上下文对象。
__模板表达式的书写原则__
模板表达式能够制作或者毁坏一个应用，所以请遵守这些原则：
* 没有副作用——一个模板表达式除了改变目标属性的值以外不应该改变任何应用状态，这是基于Angular2的“单向数据路”准则。不用担心在读组件值的时候改变其他的一些展示值。视图应当通过一个单向传递来保持稳定。
* 快速执行——Angular执行表达式的频率远超我们的想象。每一次的键盘或者鼠标事件这些表达式都会被执行。如果表达式执行缓慢，将会大大降低用户的体验。当计算复杂时，可以考虑从其他计算的值缓存来计算。
* 简单——尽管可以写一些相当复杂的模板表达式，但是通常不要这么做。属性名字和方法调用应当成为规范。偶尔有个布尔值否定（!）也是可以的。否则，限制应用和业务逻辑都放到组件自身，这样也会令开发和测试变得容易。
* 幂等性——一个幂等性表达式是理想的，因为幂等性表达式是单边影响并且提高了Angular的改变检测性能。在Angular中，幂等性表达式通常在他依赖的值改变之前都会返回一个准确的相同的值。
###3.1.2 模板声明
模板声明通过绑定目标（比如元素、组件或者指令）来响应一个事件。在事件绑定部分也将会有模板声明的介绍，模板声明出现在`=`的右侧，如`(事件)="模板声明"`
和模板表达式一样，模板声明和Javascript语句类似。模板表达式和模板声明的解析器不同，模板声明支持`=`赋值操作，也支持多条语句（用;或者,分隔）。但是，一些Javascript语句还是不被支持的：
* new操作符
* 自增和自减操作（`++`和`--`）
* 赋值操作，如`+=`和`-=`
* 不支持位运算符（`|`和`&`）
* 模板表达式操作



